<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  
 <mapper namespace="com.cs.mapper.MemberMapper"> 
 
 	<resultMap type="com.cs.domain.MemberVO" id="memberMap">
 		<id property="userid" column="userid"/>
 		<result property="userid" column="userid"/>
 		<result property="password" column="password"/>
 		<result property="username" column="username"/>
 		<result property="regdate" column="regdate"/>
 		<result property="moddate" column="moddate"/>
 		<result property="enabled" column="enabled"/>
 		<result property="nickname" column="nickname"/>
 		<result property="email" column="email"/>
 		<result property="phone" column="phone"/>
 		<result property="address" column="address"/>
 		<collection property="authList" resultMap="authMap"/>
 	</resultMap>

	<resultMap type="com.cs.domain.AuthVO" id="authMap">
		<result property="userid" column="userid"/>
		<result property="auth" column="auth" /> 
	</resultMap>
 
 	<!-- 추가 -->
 	<insert id="insert" parameterType="com.cs.domain.MemberVO">
 		insert into tbl_member ( userid , password, username, nickname, email, phone, address ) 
 		values ( #{userid} , #{password}, #{username}, #{nickname}, #{email}, #{phone}, #{address} )
 	</insert>

	<!-- 읽기 -->
 	<select id="read" resultMap="memberMap" resultType="com.cs.domain.MemberVO">
 		select *
 		from tbl_member m left outer join tbl_member_auth auth on m.userid = auth.userid 
 		where m.userid = #{userid}
 	</select>
 
 </mapper>